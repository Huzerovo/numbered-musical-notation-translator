# 简谱转调工具

## 一些定义

### 调（key）

**key**定义为`{C, C#, D, D#, E, F, F#, G, G#, A, A#, B}`其中之一。

### 音调（tone）

**tone**定义与调**key**类似，与**key**不同的是，它可以使用`()`与`[]`来表示相对的音高。
如：`(B)`表示比`C`低半个音。**tone**表示的音是一个绝对音高，
可以与**pitch**一一对应。

### 调号（key signature）

**调号**定义为`1=X`，其中`1=`是一个**固定前缀**，`X`表示一个调（key）

### 音高（pitch）

**音高**定义为`{1, 5*12}`范围中的数。表示从倍低音`((C))`到倍高音`[[B]]`的绝对音高。

### 音符（note）

**音符**定义为`{1, #1, 2, #2, 3, 4, #4, 5, #5, 6, #6, 7}`其中之一，
可使用`()`与`[]`调整相对音高。
`1`表示基调**key**，即调号中定义的**key**。
在不同的调号下，`1`表示的音高**pitch**也不同。

## 主要函数

- **note_to_pitch**: 根据原调号，将简谱中的note转化为pitch。
- **pitch_to_note**: 根据目标调号，将pitch转化为对应的note。
- **tone_to_pitch**: 将**tone**转化为**pitch**。
- **pitch_to_tone**: 将**pitch**转化为**tone**。
- **tone_to_key**: 去除**tone**可能包含的`()`与`[]`。

> 不存在key_to_tone，因为key只是一个符号标识，不应当存在音高的概念。
> 以`(C)`作为基调和以`C`作为基调，它们的调号均表示为`1=C`。
